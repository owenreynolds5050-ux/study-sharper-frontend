(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3254:function(e,t,s){Promise.resolve().then(s.bind(s,441))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var a=s(2972),l=s.n(a)},441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),l=s(2265),i=s(5526),r=s(9376),d=s(7648);function n(){let[e,t]=(0,l.useState)({totalNotes:0,totalAssignments:0,upcomingAssignments:0,totalStudyTime:0,quizzesCompleted:0,streakDays:0,tokens:0,xp:0,level:1}),[s,n]=(0,l.useState)({first_name:null,last_name:null}),[c,o]=(0,l.useState)(!0),[m,x]=(0,l.useState)(!1),[u,h]=(0,l.useState)([]),[g,v]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[N,y]=(0,l.useState)({current:0,target:240}),[f,b]=(0,l.useState)({current:0,target:1200}),D=(0,r.useRouter)();(0,l.useEffect)(()=>{(async()=>{{let a=localStorage.getItem("testMode"),l=localStorage.getItem("testUser");if("true"===a&&l){console.log("Test mode detected, using mock user data");try{var e,s;let a=JSON.parse(l);n({first_name:(null===(e=a.user_metadata)||void 0===e?void 0:e.first_name)||"Test",last_name:(null===(s=a.user_metadata)||void 0===s?void 0:s.last_name)||"User"}),x(!0),t({totalNotes:12,totalAssignments:5,upcomingAssignments:3,totalStudyTime:2840,quizzesCompleted:47,streakDays:12,tokens:2450,xp:8750,level:15}),h([{id:"1",type:"token_earned",title:"Daily Login Bonus",description:"Earned 50 tokens for logging in",tokens:50,timestamp:new Date().toISOString(),icon:"\uD83D\uDCB0"},{id:"2",type:"achievement",title:"Quiz Master",description:"Unlocked for scoring 90%+ on 10 quizzes",timestamp:new Date(Date.now()-36e5).toISOString(),icon:"\uD83C\uDFC6"},{id:"3",type:"study_session",title:"Math Study Session",description:"Completed 90-minute focused study session",tokens:100,timestamp:new Date(Date.now()-72e5).toISOString(),icon:"\uD83D\uDCDA"}]),v([{id:"1",name:"Alex Johnson",avatar:"\uD83D\uDC68‍\uD83C\uDF93",tokens:3200,level:18},{id:"2",name:"Sarah Chen",avatar:"\uD83D\uDC69‍\uD83C\uDF93",tokens:2890,level:16},{id:"3",name:"Mike Rodriguez",avatar:"\uD83D\uDC68‍\uD83D\uDCBB",tokens:2650,level:15}]),j([{id:"1",title:"Review Calculus Derivatives",description:"Based on your recent quiz performance, reviewing derivatives would help",type:"review",subject:"Mathematics",priority:"high"},{id:"2",title:"Practice World War II Quiz",description:"You haven't practiced history in 3 days",type:"quiz",subject:"History",priority:"medium"}]),y({current:150,target:240}),b({current:720,target:1200}),o(!1);return}catch(e){console.error("Error parsing test user data:",e)}}}let{data:{user:a}}=await i.O.auth.getUser();if(!a){D.push("/auth/login");return}await w(),await S()})()},[D]);let w=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{data:t}=await i.O.from("profiles").select("first_name, last_name").eq("id",e.id).single();t&&n(t)}catch(e){console.error("Error fetching user profile:",e),n({first_name:"User",last_name:null})}},S=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{count:s}=await i.O.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",e.id),{count:a}=await i.O.from("assignments").select("*",{count:"exact",head:!0}).eq("user_id",e.id),l=new Date;l.setDate(l.getDate()+7);let{count:r}=await i.O.from("assignments").select("*",{count:"exact",head:!0}).eq("user_id",e.id).lt("due_date",l.toISOString()).gt("due_date",new Date().toISOString()),{data:d}=await i.O.from("study_sessions").select("duration_minutes").eq("user_id",e.id),n=(null==d?void 0:d.reduce((e,t)=>e+t.duration_minutes,0))||0;t({totalNotes:s||0,totalAssignments:a||0,upcomingAssignments:r||0,totalStudyTime:n,quizzesCompleted:0,streakDays:0,tokens:0,xp:0,level:1})}catch(e){console.error("Error fetching stats:",e),t({totalNotes:0,totalAssignments:0,upcomingAssignments:0,totalStudyTime:0,quizzesCompleted:0,streakDays:0,tokens:0,xp:0,level:1})}finally{o(!1)}};if(c)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})});let k=async()=>{m?(localStorage.removeItem("testUser"),localStorage.removeItem("testMode")):await i.O.auth.signOut(),D.push("/auth/login")},C=s.first_name||"there",I=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"space-y-8",children:[m&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Test Mode Active"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"You're using a test account. Some features may be limited."})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",C,"! \uD83C\uDF93"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Ready to continue your learning journey?"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 text-white px-4 py-2 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold",children:["Level ",e.level]}),(0,a.jsxs)("div",{className:"text-xs opacity-90",children:[e.xp," XP"]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-4 py-2 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:e.tokens}),(0,a.jsx)("div",{className:"text-xs opacity-90",children:"Tokens"})]})}),(0,a.jsx)("button",{onClick:k,className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition-colors",children:"Logout"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-orange-400 to-red-500 text-white p-6 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Study Streak \uD83D\uDD25"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:e.streakDays}),(0,a.jsx)("div",{className:"text-orange-100",children:"days in a row"})]}),(0,a.jsx)("div",{className:"text-5xl opacity-80",children:"\uD83D\uDD25"})]})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Goal"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Study Time"}),(0,a.jsxs)("span",{children:[N.current,"m / ",N.target,"m"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(N.current/N.target*100,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[Math.round(N.current/N.target*100),"% complete"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Goal"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Study Time"}),(0,a.jsxs)("span",{children:[Math.floor(f.current/60),"h ",f.current%60,"m / ",Math.floor(f.target/60),"h"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(f.current/f.target*100,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[Math.round(f.current/f.target*100),"% complete"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCDA"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.totalNotes}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Notes"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.totalAssignments}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Assignments"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83E\uDDE0"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.quizzesCompleted}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Quizzes"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"⏱️"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[Math.floor(e.totalStudyTime/60),"h"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Study Time"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"⚡"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.xp}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"XP"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"⏰"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.upcomingAssignments}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Due Soon"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mr-4",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]}),e.tokens&&(0,a.jsxs)("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm font-medium",children:["+",e.tokens," tokens"]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Study Recommendations"}),(0,a.jsx)("div",{className:"ml-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-2 py-1 rounded-full",children:"AI"})]}),(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center mt-2 space-x-2",children:[(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e.subject}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(I(e.priority)),children:[e.priority," priority"]})]})]}),(0,a.jsx)("button",{className:"bg-primary-600 text-white px-3 py-1 rounded text-sm hover:bg-primary-700 transition-colors",children:"Start"})]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Friends \uD83C\uDFC6"}),(0,a.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 font-bold text-sm mr-3",children:t+1}),(0,a.jsx)("div",{className:"text-xl mr-3",children:e.avatar}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Level ",e.level]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold text-yellow-600",children:e.tokens}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"tokens"})]})]},e.id))}),(0,a.jsx)(d.default,{href:"/social",className:"block text-center text-primary-600 hover:text-primary-700 text-sm font-medium mt-4",children:"View All Friends →"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Deadlines"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-red-600 mr-3",children:"\uD83D\uDCDD"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:"Math Homework"}),(0,a.jsx)("div",{className:"text-xs text-red-600",children:"Due tomorrow"})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-yellow-600 mr-3",children:"\uD83D\uDCDA"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:"History Essay"}),(0,a.jsx)("div",{className:"text-xs text-yellow-600",children:"Due in 3 days"})]})]})]}),(0,a.jsx)(d.default,{href:"/calendar",className:"block text-center text-primary-600 hover:text-primary-700 text-sm font-medium mt-4",children:"View Calendar →"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(d.default,{href:"/study",className:"bg-primary-600 text-white p-3 rounded-lg text-center hover:bg-primary-700 transition-colors",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDA"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Start Studying"})]}),(0,a.jsxs)(d.default,{href:"/notes",className:"bg-green-600 text-white p-3 rounded-lg text-center hover:bg-green-700 transition-colors",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Upload Notes"})]}),(0,a.jsxs)(d.default,{href:"/study?mode=quiz",className:"bg-purple-600 text-white p-3 rounded-lg text-center hover:bg-purple-700 transition-colors",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83E\uDDE0"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Take Quiz"})]}),(0,a.jsxs)(d.default,{href:"/social",className:"bg-blue-600 text-white p-3 rounded-lg text-center hover:bg-blue-700 transition-colors",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDC65"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Find Friends"})]})]})]})]})]})]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return d}});var a=s(3887),l=s(257);let i="https://yicmvsmebwfbvxudyfbg.supabase.co",r=l.env.SUPABASE_SERVICE_ROLE_KEY,d=(0,a.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});r&&(0,a.eI)(i,r,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=3254)}),_N_E=e.O()}]);