(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{8165:function(e,r,t){Promise.resolve().then(t.bind(t,3669))},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return a.a}});var s=t(2972),a=t.n(s)},3669:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var s=t(7437),a=t(2265),o=t(5526),n=t(9376),i=t(7648);function c(){let[e,r]=(0,a.useState)(""),[t,c]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[y,x]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[v,N]=(0,a.useState)(!1),j=(0,n.useRouter)(),k=["testuser123@outlook.com","testuser456@outlook.com","testuser789@outlook.com","user@localhost"],C=e=>!!k.includes(e.toLowerCase())||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),S=e=>e.length>=8&&/[A-Z]/.test(e)&&/[a-z]/.test(e)&&/\d/.test(e),I=async r=>{if(r.preventDefault(),g(!0),x(""),w(""),!e.trim()||!t.trim()){x("Please enter your first and last name"),g(!1);return}if(!C(l)){x("Please enter a valid email address"),g(!1);return}if(!S(u)){x("Password must be at least 8 characters with uppercase, lowercase, and number"),g(!1);return}if(u!==p){x("Passwords do not match"),g(!1);return}try{let{data:r,error:s}=await o.O.auth.signUp({email:l,password:u,options:{data:{first_name:e.trim(),last_name:t.trim()},emailRedirectTo:"".concat(window.location.origin,"/auth/verify-email"),captchaToken:k.includes(l.toLowerCase())?"test-mode":void 0}});if(s)console.error("Signup error details:",s),console.error("Error code:",s.status),console.error("Error message:",s.message),x("Signup failed: ".concat(s.message," (Code: ").concat(s.status||"unknown",")"));else if(console.log("Signup successful, checking if auto-confirmed..."),k.includes(l.toLowerCase())){console.log("Test email detected, attempting auto-confirmation...");try{await new Promise(e=>setTimeout(e,3e3));let{error:e}=await o.O.auth.signInWithPassword({email:l,password:u});e?(console.log("Auto-login failed, user needs email confirmation"),e.message.includes("Email not confirmed")?(x("Account created! For testing, you can try logging in directly - the email confirmation might be processed automatically. If that doesn't work, please check your email."),setTimeout(()=>{x(""),w("Account created! Redirecting to login page for testing..."),setTimeout(()=>{j.push("/auth/login")},1500)},3e3)):x("Account created! Please check your email to confirm your account before logging in.")):(console.log("Auto-login successful!"),w("Account created and confirmed! Redirecting to dashboard..."),setTimeout(()=>{j.push("/dashboard")},1e3))}catch(e){console.error("Auto-confirmation error:",e),x("Account created! Please check your email to confirm your account.")}}else w("Account created! Please check your email to confirm your account before logging in.")}catch(e){x("An unexpected error occurred")}finally{g(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your Study Sharper account"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,s.jsx)(i.default,{href:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to existing account"})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-900",children:"Test Mode"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"Click below to auto-fill test credentials for immediate testing"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{r("Test"),c("User"),d("testuser123@outlook.com"),m("Test123!"),f("Test123!"),N(!0),x(""),w('Test credentials loaded! Click "Create account" to continue.')},className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Load Test Data"})]})}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:I,children:[y&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:y}),b&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:b}),(0,s.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"firstName",className:"sr-only",children:"First Name"}),(0,s.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"First Name",value:e,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"lastName",className:"sr-only",children:"Last Name"}),(0,s.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Last Name",value:t,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:l,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password (8+ chars, uppercase, lowercase, number)",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:p,onChange:e=>f(e.target.value)})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:h?"Creating account...":"Create account"})})]})]})})}},5526:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var s=t(3887),a=t(257);let o="https://yicmvsmebwfbvxudyfbg.supabase.co",n=a.env.SUPABASE_SERVICE_ROLE_KEY,i=(0,s.eI)(o,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});n&&(0,s.eI)(o,n,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=8165)}),_N_E=e.O()}]);