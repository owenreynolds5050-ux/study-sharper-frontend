(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{5675:function(e,t,s){Promise.resolve().then(s.bind(s,707))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(2972),n=s.n(a)},707:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),r=s(5526),i=s(9376),l=s(7648);function c(e){let{params:t}=e,[s,c]=(0,n.useState)(null),[d,o]=(0,n.useState)(!0),[m,u]=(0,n.useState)(""),x=(0,i.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await r.O.auth.getUser();if(!e){x.push("/auth/login");return}let{data:s,error:a}=await r.O.from("notes").select("*").eq("id",t.id).eq("user_id",e.id).single();a?u("Note not found"):c(s)}catch(e){u("An unexpected error occurred")}finally{o(!1)}})()},[t.id,x]);let h=async()=>{if(s){o(!0);try{let e=s.content.length>200?s.content.substring(0,200)+"...":s.content,{error:t}=await r.O.from("notes").update({summary:e}).eq("id",s.id);t?u("Failed to generate summary"):(c({...s,summary:e}),u(""))}catch(e){u("Failed to generate summary")}finally{o(!1)}}};return d?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading note..."})}):m||!s?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Note not found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:m}),(0,a.jsx)(l.default,{href:"/notes",className:"text-primary-600 hover:text-primary-700",children:"← Back to Notes"})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(l.default,{href:"/notes",className:"text-gray-600 hover:text-gray-900",children:"← Back to Notes"}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(l.default,{href:"/notes/".concat(s.id,"/edit"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Edit Note"})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["Created ",new Date(s.created_at).toLocaleDateString()," • Updated ",new Date(s.updated_at).toLocaleDateString()]})]}),(0,a.jsx)("button",{onClick:h,disabled:d,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:d?"Generating...":"Generate Summary"})]}),s.tags.length>0&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.tags.map((e,t)=>(0,a.jsxs)("span",{className:"inline-block bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded-full",children:["#",e]},t))})})]}),s.summary&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-blue-900 mb-2",children:"AI Summary"}),(0,a.jsx)("p",{className:"text-blue-800",children:s.summary})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content"}),(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:s.content})})]})]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var a=s(3887),n=s(257);let r="https://yicmvsmebwfbvxudyfbg.supabase.co",i=n.env.SUPABASE_SERVICE_ROLE_KEY,l=(0,a.eI)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});i&&(0,a.eI)(r,i,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=5675)}),_N_E=e.O()}]);