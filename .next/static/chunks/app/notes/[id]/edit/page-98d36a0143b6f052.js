(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369],{4362:function(e,t,r){Promise.resolve().then(r.bind(r,7838))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(2972),a=r.n(s)},7838:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(7437),a=r(2265),n=r(5526),i=r(9376),o=r(7648);function l(e){let{params:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(!0),[g,y]=(0,a.useState)(!1),[b,N]=(0,a.useState)(""),j=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await n.O.auth.getUser();if(!e){j.push("/auth/login");return}let{data:r,error:s}=await n.O.from("notes").select("*").eq("id",t.id).eq("user_id",e.id).single();s?N("Note not found"):(l(r),d(r.title),m(r.content),h(r.tags.join(", ")))}catch(e){N("An unexpected error occurred")}finally{f(!1)}})()},[t.id,j]);let v=async e=>{if(e.preventDefault(),r){y(!0),N("");try{let e={title:c.trim(),content:u.trim(),tags:x.split(",").map(e=>e.trim()).filter(e=>e.length>0),updated_at:new Date().toISOString()},{error:t}=await n.O.from("notes").update(e).eq("id",r.id);t?N(t.message):j.push("/notes/".concat(r.id))}catch(e){N("An unexpected error occurred")}finally{y(!1)}}},I=async()=>{if(r&&confirm("Are you sure you want to delete this note? This action cannot be undone."))try{let{error:e}=await n.O.from("notes").delete().eq("id",r.id);e?N("Failed to delete note"):j.push("/notes")}catch(e){N("Failed to delete note")}};return p?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading note..."})}):b||!r?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Note not found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:b}),(0,s.jsx)(o.default,{href:"/notes",className:"text-primary-600 hover:text-primary-700",children:"← Back to Notes"})]}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4 mb-4",children:(0,s.jsx)(o.default,{href:"/notes/".concat(r.id),className:"text-gray-600 hover:text-gray-900",children:"← Back to Note"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Note"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Make changes to your note"})]}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[b&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,s.jsx)("input",{type:"text",id:"title",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter note title...",value:c,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,s.jsx)("textarea",{id:"content",required:!0,rows:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your note content here...",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),(0,s.jsx)("input",{type:"text",id:"tags",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., biology, chapter-1, important",value:x,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{type:"button",onClick:I,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Note"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(o.default,{href:"/notes/".concat(r.id),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:g?"Saving...":"Save Changes"})]})]})]})]})}},5526:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var s=r(3887),a=r(257);let n="https://yicmvsmebwfbvxudyfbg.supabase.co",i=a.env.SUPABASE_SERVICE_ROLE_KEY,o=(0,s.eI)(n,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});i&&(0,s.eI)(n,i,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=4362)}),_N_E=e.O()}]);