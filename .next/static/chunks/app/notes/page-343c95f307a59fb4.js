(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{1772:function(e,t,s){Promise.resolve().then(s.bind(s,6711))},6711:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(2265),i=s(5526),n=s(9376);function o(){let[e,t]=(0,r.useState)(!0),[s,o]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)("upload"),[g,y]=(0,r.useState)([]),[f,v]=(0,r.useState)(""),[j,b]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[I,D]=(0,r.useState)([]),[C,k]=(0,r.useState)([]),S=(0,n.useRouter)();(0,r.useEffect)(()=>{(async()=>{{let e=localStorage.getItem("testMode"),t=localStorage.getItem("testUser");if("true"===e&&t){console.log("Test mode detected, using mock user data");let e=[{id:"1",type:"user",content:"Can you explain the chain rule from my calculus notes?",timestamp:new Date(Date.now()-36e5).toISOString(),noteId:"1"},{id:"2",type:"ai",content:"Based on your calculus notes, the chain rule is used to find the derivative of composite functions. If you have f(g(x)), the derivative is f'(g(x)) \xd7 g'(x). For example, if f(x) = (3x + 1)\xb2, you would use the chain rule: derivative = 2(3x + 1) \xd7 3 = 6(3x + 1).",timestamp:new Date(Date.now()-359e4).toISOString(),noteId:"1"},{id:"3",type:"user",content:"What were the main causes of World War II according to my history notes?",timestamp:new Date(Date.now()-18e5).toISOString(),noteId:"2"},{id:"4",type:"ai",content:"According to your history lecture notes, the main causes of WWII included: 1) The harsh terms of the Treaty of Versailles, 2) Economic instability from the Great Depression, 3) Rise of totalitarian regimes in Germany, Italy, and Japan, 4) Failure of the League of Nations to maintain peace, and 5) Aggressive expansionist policies by Axis powers.",timestamp:new Date(Date.now()-179e4).toISOString(),noteId:"2"}];o([{id:"1",title:"Calculus Derivatives - Chapter 3",content:"Derivatives are fundamental to calculus. The derivative of a function represents the rate of change...",tags:["mathematics","calculus","derivatives"],summary:"Comprehensive notes on derivatives including power rule, product rule, and chain rule with examples.",file_type:"pdf",created_at:"2024-01-10T10:00:00Z",updated_at:"2024-01-10T10:00:00Z",user_id:"test-user",highlights:[{id:"1",text:"Power rule: d/dx(x^n) = nx^(n-1)",color:"yellow",position:150},{id:"2",text:"Chain rule for composite functions",color:"blue",position:300}]},{id:"2",title:"World War II Audio Lecture",content:"Transcription: Today we discuss the major events of World War II, starting with the invasion of Poland in 1939...",tags:["history","world-war-2","lecture"],summary:"Audio lecture covering WWII timeline, major battles, and political consequences.",file_type:"audio",transcription:"Today we discuss the major events of World War II, starting with the invasion of Poland in 1939. The war fundamentally changed the global political landscape...",created_at:"2024-01-09T14:30:00Z",updated_at:"2024-01-09T14:30:00Z",user_id:"test-user"},{id:"3",title:"Organic Chemistry Lab Report",content:"Lab experiment on synthesis of aspirin. Procedure, observations, and analysis of results.",tags:["chemistry","organic","lab-report"],summary:"Lab report documenting aspirin synthesis with yield calculations and purity analysis.",file_type:"document",created_at:"2024-01-08T16:45:00Z",updated_at:"2024-01-08T16:45:00Z",user_id:"test-user"}]),y(e),b([{id:"1",name:"Physics_Chapter_5.pdf",type:"application/pdf",size:2456789,url:"/mock/physics.pdf",status:"completed",summary:"Chapter 5 covers electromagnetic waves, their properties, and applications in modern technology."},{id:"2",name:"Biology_Lecture_Recording.mp3",type:"audio/mp3",size:15678432,url:"/mock/biology.mp3",status:"processing",transcription:"Partial transcription: Cell division is a fundamental process..."}]),k(["mathematics","calculus","derivatives","history","world-war-2","lecture","chemistry","organic","lab-report","physics","biology"]),d(!1);return}}let{data:{user:e}}=await i.O.auth.getUser();if(!e){S.push("/auth/login");return}await L()})()},[S]);let L=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{data:t,error:s}=await i.O.from("notes").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});s?console.error("Error fetching notes:",s):o(t||[])}catch(e){console.error("Error fetching notes:",e)}finally{d(!1)}},T=s.filter(e=>{let t=e.title.toLowerCase().includes(c.toLowerCase())||e.content&&e.content.toLowerCase().includes(c.toLowerCase())||e.tags&&e.tags.some(e=>e.toLowerCase().includes(c.toLowerCase())),s=0===I.length||e.tags&&I.every(t=>{var s;return null===(s=e.tags)||void 0===s?void 0:s.includes(t)});return t&&s}),_=async e=>{for(let t=0;t<e.length;t++){let s=e[t],a={id:Date.now().toString()+t,name:s.name,type:s.type,size:s.size,url:URL.createObjectURL(s),status:"uploading"};b(e=>[...e,a]),setTimeout(()=>{b(e=>e.map(e=>e.id===a.id?{...e,status:"processing"}:e))},1e3),setTimeout(()=>{b(e=>e.map(e=>e.id===a.id?{...e,status:"completed",summary:"AI-generated summary for ".concat(s.name),transcription:s.type.startsWith("audio")?"AI-generated transcription...":void 0}:e))},3e3)}},A=async()=>{if(!f.trim())return;let e={id:Date.now().toString(),type:"user",content:f,timestamp:new Date().toISOString(),noteId:null==u?void 0:u.id};y(t=>[...t,e]),v(""),setTimeout(()=>{let e={id:(Date.now()+1).toString(),type:"ai",content:"Based on your notes, I can help you with that. ".concat(u?'Looking at "'.concat(u.title,'", '):"","here's what I found..."),timestamp:new Date().toISOString(),noteId:null==u?void 0:u.id};y(t=>[...t,e])},1500)},E=e=>e.includes("pdf")?"\uD83D\uDCC4":e.includes("audio")?"\uD83C\uDFB5":e.includes("image")?"\uD83D\uDDBC️":e.includes("video")?"\uD83C\uDFA5":"\uD83D\uDCC4",W=e=>{switch(e){case"completed":return"text-green-600";case"processing":return"text-yellow-600";case"uploading":return"text-blue-600";case"error":return"text-red-600";default:return"text-gray-600"}};return l?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading notes..."})}):(0,a.jsxs)("div",{className:"flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:(0,a.jsx)("div",{className:"px-6 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Notes"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsx)("p",{className:"text-primary-100",children:"Create, manage, and organize your study notes"}),(0,a.jsx)("span",{className:"text-primary-200 text-xs",children:"•"}),(0,a.jsx)("p",{className:"text-primary-200 text-xs",children:"Interact with your notes with AI power"})]})]})})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"".concat(e?"w-80":"w-16"," bg-white shadow-lg transition-all duration-300 flex flex-col border-r border-gray-200"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-semibold text-gray-900 ".concat(!e&&"hidden"),children:"Saved Notes"}),(0,a.jsx)("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),e&&(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("input",{type:"text",placeholder:"Search notes...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:c,onChange:e=>m(e.target.value)})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===T.length?(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:e?(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{className:"mx-auto h-8 w-8 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"text-sm",children:"No notes yet"})]}):(0,a.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}):(0,a.jsx)("div",{className:"p-2",children:T.map(t=>(0,a.jsxs)("div",{onClick:()=>x(t),className:"p-3 rounded-lg cursor-pointer transition-colors mb-2 ".concat((null==u?void 0:u.id)===t.id?"bg-primary-100 border border-primary-300":"hover:bg-gray-100"),children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-1 ".concat(!e&&"hidden"),children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1 ".concat(!e&&"hidden"),children:t.content}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:new Date(t.updated_at).toLocaleDateString()})]},t.id))})})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Files"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[T.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>x(e),children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-1",children:e.title})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:new Date(e.updated_at).toLocaleDateString()})]},e.id)),0===T.length&&(0,a.jsxs)("div",{className:"col-span-full text-center py-8 text-gray-500",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{children:"No recent files"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Notes Manually"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Title"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter note title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,a.jsx)("textarea",{rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Write your note content here..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., biology, chapter 1, important"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Preview"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{className:"font-medium",children:"Title: [Note Title]"}),(0,a.jsx)("p",{className:"mt-2",children:"[Note Content]"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Tags: "}),(0,a.jsx)("span",{className:"text-xs text-primary-600",children:"[tags]"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Save Note"}),(0,a.jsx)("button",{className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Clear"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Study Assistant"}),(0,a.jsx)("div",{className:"ml-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-2 py-1 rounded-full",children:"AI"})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:0===g.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD16"}),(0,a.jsx)("p",{children:"Ask me anything about your notes!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:g.slice(-5).map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-xs px-3 py-2 rounded-lg text-sm ".concat("user"===e.type?"bg-primary-600 text-white":"bg-white border"),children:e.content})},e.id))})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>v(e.target.value),onKeyPress:e=>"Enter"===e.key&&A(),placeholder:"Ask about your notes...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),(0,a.jsx)("button",{onClick:A,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Send"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI-Powered File Upload"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&_(e.dataTransfer.files)},children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD16"}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI-Enhanced Processing"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload files for automatic transcription, summarization, and smart tagging"}),(0,a.jsx)("div",{className:"flex justify-center space-x-4",children:(0,a.jsxs)("label",{className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors cursor-pointer",children:["Choose Files",(0,a.jsx)("input",{type:"file",multiple:!0,className:"hidden",accept:".pdf,.docx,.txt,.png,.jpg,.jpeg,.mp3,.wav,.m4a",onChange:e=>e.target.files&&_(e.target.files)})]})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-4",children:[(0,a.jsx)("p",{children:"PDF, DOCX, TXT, Images, Audio • Max 50MB"}),(0,a.jsx)("p",{children:"\uD83C\uDFA4 Audio transcription • \uD83D\uDCCB Auto-summaries • \uD83C\uDFF7️ Smart tags"})]})]}),j.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Processing Queue"}),(0,a.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-xl mr-3",children:E(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-xs ".concat(W(e.status)),children:"completed"===e.status?"✅ AI Processing Complete":"\uD83E\uDD16 Processing..."})]})]},e.id))})]})]})]})]})]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var a=s(3887),r=s(257);let i="https://yicmvsmebwfbvxudyfbg.supabase.co",n=r.env.SUPABASE_SERVICE_ROLE_KEY,o=(0,a.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});n&&(0,a.eI)(i,n,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,971,117,744],function(){return e(e.s=1772)}),_N_E=e.O()}]);