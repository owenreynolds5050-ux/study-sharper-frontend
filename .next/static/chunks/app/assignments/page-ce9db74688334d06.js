(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{7281:function(e,t,s){Promise.resolve().then(s.bind(s,3091))},3091:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),n=s(2265),a=s(5526),i=s(9376),l=s(7648),o=s(3430),c=s(4289),d=s(9121),u=s(6115);function m(){let[e,t]=(0,n.useState)([]),[s,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)("all"),p=(0,i.useRouter)();(0,n.useEffect)(()=>{(async()=>{let{data:{user:e}}=await a.O.auth.getUser();if(!e){p.push("/auth/login");return}await g()})()},[p]);let g=async()=>{try{let{data:{user:e}}=await a.O.auth.getUser();if(!e)return;let{data:s,error:r}=await a.O.from("assignments").select("*").eq("user_id",e.id).order("due_date",{ascending:!0});r?console.error("Error fetching assignments:",r):t(s||[])}catch(e){console.error("Error fetching assignments:",e)}finally{m(!1)}},y=e.filter(e=>{let t=new Date,s=new Date(e.due_date),r=(0,o.R)(s,t)&&"completed"!==e.status,n=(0,c.A)(s,t)&&(0,o.R)(s,(0,d.E)(t,7));switch(x){case"upcoming":return n;case"overdue":return r;case"completed":return"completed"===e.status;default:return!0}}),f=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},v=async(s,r)=>{try{let{error:n}=await a.O.from("assignments").update({status:r,updated_at:new Date().toISOString()}).eq("id",s);n?console.error("Error updating assignment status:",n):t(e.map(e=>e.id===s?{...e,status:r}:e))}catch(e){console.error("Error updating assignment status:",e)}},b=async s=>{if(confirm("Are you sure you want to delete this assignment?"))try{let{error:r}=await a.O.from("assignments").delete().eq("id",s);r?console.error("Error deleting assignment:",r):t(e.filter(e=>e.id!==s))}catch(e){console.error("Error deleting assignment:",e)}};return s?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsx)("div",{className:"text-lg",children:"Loading assignments..."})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Assignments"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Track your assignments, tests, and projects"})]}),(0,r.jsx)(l.default,{href:"/assignments/new",className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"New Assignment"})]}),(0,r.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:["all","upcoming","overdue","completed"].map(t=>(0,r.jsxs)("button",{onClick:()=>h(t),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(x===t?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[t.charAt(0).toUpperCase()+t.slice(1),"upcoming"===t&&(0,r.jsx)("span",{className:"ml-1 text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded",children:e.filter(e=>{let t=new Date(e.due_date),s=new Date;return(0,c.A)(t,s)&&(0,o.R)(t,(0,d.E)(s,7))}).length}),"overdue"===t&&(0,r.jsx)("span",{className:"ml-1 text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:e.filter(e=>{let t=new Date(e.due_date),s=new Date;return(0,o.R)(t,s)&&"completed"!==e.status}).length})]},t))}),0===y.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===x?"No assignments yet":"No ".concat(x," assignments")}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"all"===x?"Get started by creating your first assignment.":'No assignments match the "'.concat(x,'" filter.')}),"all"===x&&(0,r.jsx)(l.default,{href:"/assignments/new",className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Create your first assignment"})]}):(0,r.jsx)("div",{className:"space-y-4",children:y.map(e=>{let t=new Date(e.due_date),s=new Date,n=(0,o.R)(t,s)&&"completed"!==e.status,a=(0,c.A)(t,s)&&(0,o.R)(t,(0,d.E)(s,2));return(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border ".concat(n?"border-red-200 bg-red-50":"border-gray-200"),children:(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full ".concat(f(e.priority)),children:e.priority}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full ".concat(j(e.status)),children:e.status.replace("_"," ")}),n&&(0,r.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Overdue"}),a&&!n&&(0,r.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Due Soon"})]}),e.description&&(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Due: ",(0,u.WU)(t,"MMM d, yyyy")]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.type]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("select",{value:e.status,onChange:t=>v(e.id,t.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]}),(0,r.jsx)(l.default,{href:"/assignments/".concat(e.id),className:"text-primary-600 hover:text-primary-800 p-1",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)(l.default,{href:"/assignments/".concat(e.id,"/edit"),className:"text-gray-600 hover:text-gray-800 p-1",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 p-1",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)})})]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var r=s(3887),n=s(257);let a="https://yicmvsmebwfbvxudyfbg.supabase.co",i=n.env.SUPABASE_SERVICE_ROLE_KEY,l=(0,r.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});i&&(0,r.eI)(a,i,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,63,971,117,744],function(){return e(e.s=7281)}),_N_E=e.O()}]);