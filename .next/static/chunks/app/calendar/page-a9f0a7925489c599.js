(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{6097:function(e,s,t){Promise.resolve().then(t.bind(t,6571))},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return a.a}});var r=t(2972),a=t.n(r)},6571:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),a=t(2265),i=t(5526),n=t(9376),l=t(7648);function d(){let[e,s]=(0,a.useState)([]),[t,d]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)(new Date),[u,h]=(0,a.useState)(null),[g,y]=(0,a.useState)(!1),p=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{{let e=localStorage.getItem("testMode"),s=localStorage.getItem("testUser");if("true"===e&&s){console.log("Test mode detected, using mock calendar data"),j(),o(!1);return}}let{data:{user:e}}=await i.O.auth.getUser();if(!e){p.push("/auth/login");return}await b()})()},[p]);let j=()=>{s([{id:"1",title:"Math Homework Chapter 5",description:"Complete exercises 1-20",due_date:"2024-01-15",status:"pending",priority:"high",subject:"Mathematics"},{id:"2",title:"History Essay",description:"Write 1000 words on World War II",due_date:"2024-01-18",status:"in_progress",priority:"medium",subject:"History"}]),d([{id:"1",title:"Math Study Session",date:"2024-01-14",duration:90,subject:"Mathematics"}])},b=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{data:t}=await i.O.from("assignments").select("*").eq("user_id",e.id).order("due_date",{ascending:!0}),{data:r}=await i.O.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});s(t||[]),d(r||[])}catch(e){console.error("Error fetching calendar data:",e)}finally{o(!1)}},f=s=>{let r=s.toISOString().split("T")[0];return{assignments:e.filter(e=>e.due_date===r),sessions:t.filter(e=>e.date===r)}},N=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(c)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsx)("div",{className:"text-lg",children:"Loading calendar..."})});let v=(e=>{let s=e.getFullYear(),t=e.getMonth(),r=new Date(s,t,1),a=new Date(s,t+1,0).getDate(),i=r.getDay(),n=[];for(let e=0;e<i;e++)n.push(null);for(let e=1;e<=a;e++)n.push(new Date(s,t,e));return n})(m);return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar & Assignments"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your assignments, deadlines, and study schedule"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>y(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Schedule Study Session"}),(0,r.jsx)(l.default,{href:"/calendar/new-assignment",className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add Assignment"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][m.getMonth()]," ",m.getFullYear()]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>x(new Date(m.getFullYear(),m.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("button",{onClick:()=>x(new Date),className:"px-3 py-1 text-sm bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors",children:"Today"}),(0,r.jsx)("button",{onClick:()=>x(new Date(m.getFullYear(),m.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:v.map((e,s)=>{if(!e)return(0,r.jsx)("div",{className:"h-24 p-1"},s);let t=f(e),a=e.toDateString()===new Date().toDateString(),i=u&&e.toDateString()===u.toDateString();return(0,r.jsxs)("div",{onClick:()=>h(e),className:"h-24 p-1 border rounded-lg cursor-pointer transition-colors ".concat(a?"bg-primary-50 border-primary-200":i?"bg-blue-50 border-blue-200":"hover:bg-gray-50 border-gray-200"),children:[(0,r.jsx)("div",{className:"text-sm font-medium ".concat(a?"text-primary-700":"text-gray-900"),children:e.getDate()}),(0,r.jsxs)("div",{className:"space-y-1 mt-1",children:[t.assignments.slice(0,2).map(e=>(0,r.jsx)("div",{className:"text-xs px-1 py-0.5 rounded truncate ".concat(N(e.priority)),children:e.title},e.id)),t.sessions.slice(0,1).map(e=>(0,r.jsxs)("div",{className:"text-xs px-1 py-0.5 rounded truncate bg-blue-100 text-blue-800",children:["Study: ",e.subject]},e.id)),t.assignments.length+t.sessions.length>3&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["+",t.assignments.length+t.sessions.length-3," more"]})]})]},s)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Assignments"}),(0,r.jsxs)("div",{className:"space-y-4",children:[e.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(N(e.priority)),children:e.priority}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-700 text-sm",children:"Edit"}),(0,r.jsx)("button",{className:"text-green-600 hover:text-green-700 text-sm",children:"Complete"})]})]},e.id)),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("p",{children:"No assignments yet"}),(0,r.jsx)(l.default,{href:"/calendar/new-assignment",className:"text-primary-600 hover:text-primary-700 text-sm",children:"Add your first assignment"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Study Goals & Schedule"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Daily Study Goal"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"2h / 4h"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"50%"}})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Weekly Study Goal"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"12h / 20h"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"60%"}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Today's Schedule"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Math Study Session"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"2:00 PM - 3:30 PM"})]})]}),(0,r.jsxs)("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-3"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"History Reading"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"4:00 PM - 5:00 PM"})]})]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)("button",{className:"px-3 py-2 text-sm bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors",children:"Set Goals"}),(0,r.jsx)("button",{className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Time Block"})]})})]})]})]})}},5526:function(e,s,t){"use strict";t.d(s,{O:function(){return l}});var r=t(3887),a=t(257);let i="https://yicmvsmebwfbvxudyfbg.supabase.co",n=a.env.SUPABASE_SERVICE_ROLE_KEY,l=(0,r.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});n&&(0,r.eI)(i,n,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=6097)}),_N_E=e.O()}]);